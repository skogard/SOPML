<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<title>SOPML</title>
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="SOPML" />
<meta name="twitter:description" content="Export Substack subscriptions to OPML" />
<meta name="twitter:image" content="https://skogard.github.io/SOPML/sopml.png" />
<meta property="og:url" content="https://skogard.github.io/SOPML/" />
<meta property="og:type"   content="website" />
<meta property="og:title" content="SOPML" />
<meta property="og:description" content="Export Substack subscriptions to OPML" />
<meta property="og:image" content="https://skogard.github.io/SOPML/sopml.png" />
<style>
body {
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: sans-serif;
}
a.button {
  background: royalblue;
  color: white;
  display: inline-block;
  padding: 10px;
  border-radius: 4px;
  text-decoration: none;
  margin: 20px 0;
  font-size: 14px;
}
a {
  color: royalblue;
}
.container {
  color: gray;
  font-size: 14px;
  max-width: 800px;
}
.step {
  border-bottom: 1px solid rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
.step img {
  width: 100%;
  margin: 20px 0;
}
h1 {
  color: black;
}
</style>
</head>
<body>
<div class='container'>
<div class='step'>
<h1>SOPML</h1>
<div>Substack to OPML</div>
<br><br>
</div>
<div class='step'>
<div>Step 1. Drag below button to your browser bookmarks bar</div>
<a class="button" href="javascript%3A%20(async%20function()%20%7B%0A%20%20%20%20let%20resp%20%3D%20await%20fetch(%60%24%7Bwindow.location.origin%7D%2Fapi%2Fv1%2Fsettings%60)%3B%0A%20%20%20%20let%20settings%20%3D%20await%20resp.json()%3B%0A%20%20%20%20const%20escapeHtml%20%3D%20(unsafe)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20unsafe.replaceAll(%27%26%27%2C%20%27%26amp%3B%27).replaceAll(%27%3C%27%2C%20%27%26lt%3B%27).replaceAll(%27%3E%27%2C%20%27%26gt%3B%27).replaceAll(%27%22%27%2C%20%27%26quot%3B%27).replaceAll(%22%27%22%2C%20%27%26%23039%3B%27)%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20outlines%20%3D%20Array.prototype.map.call(settings%5B%27subscriptions%27%5D%2C%20function(sub)%20%7B%0A%20%20%20%20%20%20%20%20let%20pub%20%3D%20sub%5B%27publication%27%5D%3B%0A%20%20%20%20%20%20%20%20return%20%60%3Coutline%20xmlUrl%3D%27%24%7BescapeHtml(pub%5B%22base_url%22%5D)%7D%2Ffeed%27%20htmlUrl%3D%27%24%7BescapeHtml(pub%5B%22base_url%22%5D)%7D%27%20text%3D%27%24%7BescapeHtml(pub%5B%22name%22%5D)%7D%27%2F%3E%60%0A%20%20%20%20%7D).join(%27%5Cn%27)%3B%0A%20%20%20%20let%20opml%20%3D%20%60%3Copml%20version%3D%272.0%27%3E%5Cn%3Cbody%3E%5Cn%3Coutline%20text%3D%27Substack%20Subscriptions%27%20title%3D%27Substack%20Subscriptions%27%3E%5Cn%24%7Boutlines%7D%5Cn%3C%2Foutline%3E%5Cn%3C%2Fbody%3E%5Cn%3C%2Fopml%3E%60%3B%0A%20%20%20%20var%20data%20%3D%20new%20Blob(%5Bopml%5D%2C%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%27application%2Fxml%27%0A%20%20%20%20%7D)%3B%0A%20%20%20%20var%20url%20%3D%20window.URL.createObjectURL(data)%3B%0A%20%20%20%20let%20a%20%3D%20document.createElement(%27a%27)%3B%0A%20%20%20%20a.textContent%20%3D%20%27DOWNLOAD%20RSS%20COLLECTION%27%3B%0A%20%20%20%20a.href%20%3D%20url%3B%0A%20%20%20%20a.download%20%3D%20%27opml.xml%27%3B%0A%20%20%20%20a.setAttribute(%27style%27%2C%20%27color%3A%20white%3B%20background%3A%20royalblue%3B%20font-size%3A%2014px%3B%20padding%3A%2010px%2020px%3B%20border-radius%3A%2030px%3B%20text-decoration%3A%20none%3B%27)%3B%0A%20%20%20%20let%20popup%20%3D%20document.createElement(%27div%27)%3B%0A%20%20%20%20popup.setAttribute(%27style%27%2C%20%27top%3A0%3B%20padding%3A%2020px%3B%20text-align%3A%20center%3B%20font-family%3A%20sans-serif%3B%20font-size%3A%2016px%3B%27)%3B%0A%20%20%20%20popup.appendChild(a)%3B%0A%20%20%20%20document.body.insertBefore(popup%2C%20document.body.firstChild)%3B%0A%7D)()%3B%0A">Substack OPML</a>
</div>
<div class='step'>
  <div>Step 2. Go to <a target="_blank" href="https://reader.substack.com/inbox">Substack Reader</a>, click the bookmarklet, and download the OPML file</div>
  <img src="bookmarklet.gif">
</div>
</body>
</html>
