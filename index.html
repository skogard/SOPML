<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<title>SOPML</title>
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="SOPML" />
<meta name="twitter:description" content="Export Substack subscriptions to OPML" />
<meta name="twitter:image" content="https://skogard.github.io/SOPML/sopml.png" />
<meta property="og:url" content="https://skogard.github.io/SOPML/" />
<meta property="og:type"   content="website" />
<meta property="og:title" content="SOPML" />
<meta property="og:description" content="Export Substack subscriptions to OPML" />
<meta property="og:image" content="https://skogard.github.io/SOPML/sopml.png" />
<style>
body {
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: sans-serif;
}
a.button {
  background: royalblue;
  color: white;
  display: inline-block;
  padding: 10px;
  border-radius: 4px;
  text-decoration: none;
  margin: 20px 0;
  font-size: 14px;
}
a {
  color: royalblue;
}
.container {
  color: gray;
  font-size: 14px;
  max-width: 800px;
}
.step {
  border-bottom: 1px solid rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
.step img {
  width: 100%;
  margin: 20px 0;
}
h1 {
  color: black;
}
</style>
</head>
<body>
<div class='container'>
<div class='step'>
<h1>SOPML</h1>
<div>Substack to OPML</div>
<br><br>
</div>
<div class='step'>
<div>Step 1. Drag below button to your browser bookmarks bar</div>
<a class="button" href="javascript:%20(async%20function()%20%7B%0A%20%20%20%20let%20resp%20=%20await%20fetch(%60$%7Bwindow.location.origin%7D/api/v1/subscriptions%60);%0A%20%20%20%20let%20subscriptions%20=%20await%20resp.json();%0A%20%20%20%20const%20escapeHtml%20=%20(unsafe)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20unsafe.replaceAll('&amp;',%20'&amp;amp;').replaceAll('%3C',%20'&amp;lt;').replaceAll('%3E',%20'&amp;gt;').replaceAll('%22',%20'&amp;quot;').replaceAll(%22'%22,%20'&amp;#039;');%0A%20%20%20%20%7D%0A%20%20%20%20let%20outlines%20=%20Array.prototype.map.call(subscriptions%5B'publications'%5D,%20function(pub)%20%7B%0A%20%20%20%20%20%20%20%20return%20%60%3Coutline%20xmlUrl='$%7BescapeHtml(pub%5B%22base_url%22%5D)%7D/feed'%20htmlUrl='$%7BescapeHtml(pub%5B%22base_url%22%5D)%7D'%20text='$%7BescapeHtml(pub%5B%22name%22%5D)%7D'/%3E%60%0A%20%20%20%20%7D).join('%5Cn');%0A%20%20%20%20let%20opml%20=%20%60%3Copml%20version='2.0'%3E%5Cn%3Cbody%3E%5Cn%3Coutline%20text='Substack%20Subscriptions'%20title='Substack%20Subscriptions'%3E%5Cn$%7Boutlines%7D%5Cn%3C/outline%3E%5Cn%3C/body%3E%5Cn%3C/opml%3E%60;%0A%20%20%20%20var%20data%20=%20new%20Blob(%5Bopml%5D,%20%7B%0A%20%20%20%20%20%20%20%20type:%20'application/xml'%0A%20%20%20%20%7D);%0A%20%20%20%20var%20url%20=%20window.URL.createObjectURL(data);%0A%20%20%20%20let%20a%20=%20document.createElement('a');%0A%20%20%20%20a.textContent%20=%20'RSS%20COLLECTION%20DOWNLOADING';%0A%20%20%20%20a.href%20=%20url;%0A%20%20%20%20a.download%20=%20'opml.xml';%0A%20%20%20%20a.setAttribute('style',%20'color:%20white;%20background:%20royalblue;%20font-size:%2014px;%20padding:%2010px%2020px;%20border-radius:%2030px;%20text-decoration:%20none;');%0A%20%20%20%20let%20popup%20=%20document.createElement('div');%0A%20%20%20%20popup.setAttribute('style',%20'top:0;%20padding:%2020px;%20text-align:%20center;%20font-family:%20sans-serif;%20font-size:%2016px;');%0A%20%20%20%20popup.appendChild(a);%0A%20%20%20%20document.body.insertBefore(popup,%20document.body.firstChild);%20a.click();%20a.textContent%20=%20'RSS%20COLLECTION%20DOWNLOADED';%0A%7D)();">Substack OPML</a>
</div>
<div class='step'>
  <div>Step 2. Go to <a target="_blank" href="https://reader.substack.com/inbox">Substack Reader</a>, click the bookmarklet, and download the OPML file</div>
  <img src="bookmarklet.gif">
</div>
</body>
</html>
